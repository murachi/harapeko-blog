<h1>制御命令は課題がいっぱい</h1>

<div class="entry">
<p><a href="/trac-wiki/otoco/%E5%A4%96%E9%83%A8%E4%BB%95%E6%A7%98/MML%E4%BB%95%E6%A7%98/%E5%88%B6%E5%BE%A1%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A6%A7.html">制御命令一覧</a>の転載が完了しました。</p>
<p>otoco の制御命令は Perl 版でも実装実績がまだ無く、仕様に関しても、構想はあるんだけれども内容は埋まらないまま穴だらけ、という状態です。メタイベントの類とか、むしろ実装が容易な上にプライオリティも高そうなものが未定義のままほったらかしですね…。早いとこどうにかしないと。</p>
<p>すでに仕様が埋まっている制御命令にもいくつか問題があります。まず <a href="/trac-wiki/otoco/%E5%A4%96%E9%83%A8%E4%BB%95%E6%A7%98/MML%E4%BB%95%E6%A7%98/%E5%88%B6%E5%BE%A1%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A6%A7#init-charset.html">#charset</a> 。これ、Encode.pm の仕様を前提にして書かれているので、指定できる文字セット名がちょっと豊富すぎますｗ。そもそもの問題として、文字セットを扱うライブラリに何を利用するのか決めないといけません (iconv にするか、nkf にするか、他のを探すか… boost にその辺やってくれるクラスがあればいいんだけどなぁ…)。</p>
<p>それともう一つ、<a href="/trac-wiki/otoco/%E5%A4%96%E9%83%A8%E4%BB%95%E6%A7%98/MML%E4%BB%95%E6%A7%98/%E5%88%B6%E5%BE%A1%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A6%A7#define-function.html">#function</a> で関数を定義するときに用いるスクリプト。 Perl 版では eval を用いる気満々で、まんま Perl で書かせるつもりでいたのですが (ファイルとかを扱えてしまえるのは問題なので、その辺の安全性をどうやって確保するかで頭を悩ませてはいましたが)、C++ から Perl パーサを呼び出す気にはなれないし (あんまり動作安定してないですからね、あれ)、自前で Perl パーサを作るなんて以ての外。という訳で、自前でスクリプト言語の仕様を考えなければなりません。まぁ、Lua かなぁ…。</p>
<p><small>2009 年 7 月 2 日 by 村山 俊之</small></p>


</div>

<p>(転載元: はらぺこ日誌 〜株式会社はらぺこ 公式ブログ〜)</p>
