<h1>Python 習得中 – その 6</h1>

<div class="entry">
<p>今回は 5章、モジュールの import の仕方やモジュールの書き方、あとはいくつかの標準ライブラリの紹介です。</p>
<p>手元ではもう概ね読了しています。ブログに書くのは一旦ここまでで終了しようかなと思っています… こうやって書き出すよりいろいろ作って実践していったほうが身につくのは早そうなので…。</p>
<p><span id="more-401"></span></p>
<h3>モジュールのパッケージ</h3>
<ol>
<li>ライブラリパスの通ったディレクトリ下にディレクトリを作成</li>
<li>その下に Python モジュールとして読み込ませるクラスや関数を書いた <code>.py</code> ファイルを作成</li>
<li>↑と同じ場所に <code>__init__.py</code> という名前の空のファイルを作成</li>
</ol>
<p>ロードするときは、ディレクトリ名が <code>package_dir</code> で、その配下にある <code>hoge.py</code> ファイルに定義されたクラスや関数をすべてロードする場合、以下の通りとなる。</p>
<pre>
from package_dir import hoge

# MyHogeHoge クラスのコンストラクタを呼ぶ場合
x = hoge.MyHogeHoge('params', '...')
</pre>
<p>名前空間はディレクトリ名、ファイル名にがっつり依存するので、ファイル構成は結構気をつけたほうが良さそうです…。</p>
<h3><code>defaultdict</code></h3>
<p>Python の辞書は存在しないキーを指定して参照しようとするとエラーになるので、キーが存在しない可能性がある場合は <code>in</code> でテストするか <code>get()</code> メソッド (存在しない場合はデフォルト値が返される) を介する必要があります。これは存在しないキーを指定してもデフォルトでエラーにならない Perl の連想配列の実装に比べて利点だと思うのですが (この挙動のおかげでバグを作りこんでしまうことが Perl の場合は本当に多い)、 <code>defaultdict()</code> はこの悪しき Perl の連想配列に似た挙動がデフォルトである上に、一度参照してしまうとそのキーにデフォルト値が割り当てられてしまうという最悪な動きをする代物です。</p>
<p>こんなの使うことあるんでしょうか…(´･_･`)</p>
<p>組み込みの辞書よりもスクリプト然としたコードを書くのに向いているのかもしれませんが (本書に示されている独自カウンタのサンプルのような… それもその直後に <code>Counter</code> を用いたずっと簡潔な書き方を示すことでくつがえ)、その割には冒頭で割と覚えにくい名前のパッケージ名からロードしてあげないといけないのも使い勝手としてはいまいちです。</p>
<h3><code>Counter</code></h3>
<p>積集合、和集合が取れるのがいいですね。</p>
<h3><code>OrderedDict</code></h3>
<p>Perl では古の pseudo hash を思い出しました…(‘A`)</p>
<h3>その他</h3>
<p>いろいろあるみたいですが、<a href="http://docs.python.jp/3/library/" title="Python 標準ライブラリ — Python 3.6.1 ドキュメント">必要に応じて探してくれば良いのかなと思います</a>。</p>
<p><small>2017 年 4 月 9 日 by 村山 俊之</small></p>


</div>

<p>(転載元: はらぺこ日誌 〜株式会社はらぺこ 公式ブログ〜)</p>
